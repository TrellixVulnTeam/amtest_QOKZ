{"ast":null,"code":"import { BUSCAR_PERS, BUSCAR_PERS_ERROR, BUSCAR_PERS_SUCCESS } from \"../types\"; //Buscar personajes\n\nexport function buscarPersonajes(index) {\n  return dispatch => {\n    dispatch(fetchAllCharacteres());\n    let apiStr;\n\n    try {\n      //Todos\n      switch (index) {\n        case 1:\n          apiStr = \"http://hp-api.herokuapp.com/api/characters/students\";\n          break;\n\n        case 2:\n          apiStr = \"http://hp-api.herokuapp.com/api/characters/staff\";\n          break;\n\n        default:\n          apiStr = \"http://hp-api.herokuapp.com/api/characters\";\n          break;\n      }\n\n      fetch(apiStr).then(response => response.json()).then(data => {\n        data = data.map(obj => ({ ...obj,\n          favorite: false\n        }));\n        dispatch(fetchAllCharacteresSuccess(data));\n        return;\n      }).catch(e => dispatch(fetchAllCharacteresError(\"Error al obtener información de los personajes.\")));\n    } catch (error) {\n      dispatch(fetchAllCharacteresError(error));\n    }\n  };\n}\n\nconst fetchAllCharacteres = () => ({\n  type: BUSCAR_PERS\n});\n\nconst fetchAllCharacteresSuccess = data => ({\n  type: BUSCAR_PERS_SUCCESS,\n  payload: data\n});\n\nconst fetchAllCharacteresError = error => ({\n  type: BUSCAR_PERS_ERROR,\n  payload: error\n});","map":{"version":3,"sources":["/Users/gilberto/projects/am-test/src/actions/persActions.js"],"names":["BUSCAR_PERS","BUSCAR_PERS_ERROR","BUSCAR_PERS_SUCCESS","buscarPersonajes","index","dispatch","fetchAllCharacteres","apiStr","fetch","then","response","json","data","map","obj","favorite","fetchAllCharacteresSuccess","catch","e","fetchAllCharacteresError","error","type","payload"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,iBAAtB,EAAyCC,mBAAzC,QAAoE,UAApE,C,CAEA;;AACA,OAAO,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AACvC,SAAQC,QAAD,IAAc;AACpBA,IAAAA,QAAQ,CAACC,mBAAmB,EAApB,CAAR;AACA,QAAIC,MAAJ;;AACA,QAAI;AACH;AACA,cAAQH,KAAR;AACC,aAAK,CAAL;AACCG,UAAAA,MAAM,GAAG,qDAAT;AACA;;AACD,aAAK,CAAL;AACCA,UAAAA,MAAM,GAAG,kDAAT;AACA;;AACD;AACCA,UAAAA,MAAM,GAAG,4CAAT;AACA;AATF;;AAWAC,MAAAA,KAAK,CAACD,MAAD,CAAL,CACEE,IADF,CACQC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADrB,EAEEF,IAFF,CAEQG,IAAD,IAAU;AACfA,QAAAA,IAAI,GAAGA,IAAI,CAACC,GAAL,CAAUC,GAAD,KAAU,EAAE,GAAGA,GAAL;AAAUC,UAAAA,QAAQ,EAAE;AAApB,SAAV,CAAT,CAAP;AACAV,QAAAA,QAAQ,CAACW,0BAA0B,CAACJ,IAAD,CAA3B,CAAR;AACA;AACA,OANF,EAOEK,KAPF,CAOSC,CAAD,IACNb,QAAQ,CACPc,wBAAwB,CACvB,iDADuB,CADjB,CARV;AAcA,KA3BD,CA2BE,OAAOC,KAAP,EAAc;AACff,MAAAA,QAAQ,CAACc,wBAAwB,CAACC,KAAD,CAAzB,CAAR;AACA;AACD,GAjCD;AAkCA;;AAED,MAAMd,mBAAmB,GAAG,OAAO;AAClCe,EAAAA,IAAI,EAAErB;AAD4B,CAAP,CAA5B;;AAIA,MAAMgB,0BAA0B,GAAIJ,IAAD,KAAW;AAC7CS,EAAAA,IAAI,EAAEnB,mBADuC;AAE7CoB,EAAAA,OAAO,EAAEV;AAFoC,CAAX,CAAnC;;AAIA,MAAMO,wBAAwB,GAAIC,KAAD,KAAY;AAC5CC,EAAAA,IAAI,EAAEpB,iBADsC;AAE5CqB,EAAAA,OAAO,EAAEF;AAFmC,CAAZ,CAAjC","sourcesContent":["import { BUSCAR_PERS, BUSCAR_PERS_ERROR, BUSCAR_PERS_SUCCESS } from \"../types\";\n\n//Buscar personajes\nexport function buscarPersonajes(index) {\n\treturn (dispatch) => {\n\t\tdispatch(fetchAllCharacteres());\n\t\tlet apiStr;\n\t\ttry {\n\t\t\t//Todos\n\t\t\tswitch (index) {\n\t\t\t\tcase 1:\n\t\t\t\t\tapiStr = \"http://hp-api.herokuapp.com/api/characters/students\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tapiStr = \"http://hp-api.herokuapp.com/api/characters/staff\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tapiStr = \"http://hp-api.herokuapp.com/api/characters\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tfetch(apiStr)\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((data) => {\n\t\t\t\t\tdata = data.map((obj) => ({ ...obj, favorite: false }));\n\t\t\t\t\tdispatch(fetchAllCharacteresSuccess(data));\n\t\t\t\t\treturn;\n\t\t\t\t})\n\t\t\t\t.catch((e) =>\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\tfetchAllCharacteresError(\n\t\t\t\t\t\t\t\"Error al obtener información de los personajes.\"\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t} catch (error) {\n\t\t\tdispatch(fetchAllCharacteresError(error));\n\t\t}\n\t};\n}\n\nconst fetchAllCharacteres = () => ({\n\ttype: BUSCAR_PERS,\n});\n\nconst fetchAllCharacteresSuccess = (data) => ({\n\ttype: BUSCAR_PERS_SUCCESS,\n\tpayload: data,\n});\nconst fetchAllCharacteresError = (error) => ({\n\ttype: BUSCAR_PERS_ERROR,\n\tpayload: error,\n});\n"]},"metadata":{},"sourceType":"module"}